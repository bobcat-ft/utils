pipeline
{
    agent {label 'Ubuntu_20.04.1'}
    stages 
    {
        stage('Build uBoot')
        {
            // This is a temperoray place holder to have Jenkins Build the Complete Image
            steps
            {  
                dir("u_boot/audiomini/")
                { 
                    sh 'wget https://frost-release.s3-us-west-2.amazonaws.com/linux-images/audio-mini-artifacts/u-boot.img'
                    sh 'wget https://frost-release.s3-us-west-2.amazonaws.com/linux-images/audio-mini-artifacts/u-boot.scr'
                }
            }
        }
        stage('Archive')
        {
            steps
            {
                dir("u_boot/audiomini/")
                {
                    archiveArtifacts artifacts: 'u-boot.img', fingerprint: true
                    archiveArtifacts artifacts: 'u-boot.scr', fingerprint: true
                }
            }
        }
        stage('Cleanup')
        {
            steps
            {
                deleteDir()
                dir("${workspace}@tmp") {
                    deleteDir()
                }
            }
        } 
    }
}